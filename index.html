<!DOCTYPE html>
<html>
<head>
    <title>NCAA 2025 Survivor Bracket</title>
    <style>
        body {
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
            background-color: #f5f5f5;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            position: relative;
            padding-bottom: 50px;
        }
        .form-container {
            background-color: rgba(232, 232, 232, 0.65);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
            width: 400px;
            text-align: center;
        }
        h1 {
            color: #2A6A5E;
            font-size: 28px;
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin: 10px 0 5px;
            color: #2A6A5E;
            font-weight: bold;
        }
        input[type="text"] {
            width: 90%;
            padding: 8px;
            margin-bottom: 15px;
            border: 2px solid #2A6A5E;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
            background-color: #fff;
            color: #2A6A5E;
        }
        select {
            width: 90%;
            padding: 8px;
            margin-bottom: 15px;
            border: 2px solid #2A6A5E;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
            background-color: #fff;
            color: #2A6A5E;
            text-align: center;
            appearance: none;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24"><path fill="%2318453B" d="M7 10l5 5 5-5z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 10px center;
            background-size: 12px;
            cursor: pointer;
        }
        button {
            background-color: #2A6A5E;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2A6A5E;
        }
        .header-img {
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
            border-radius: 10px;
        }
        .author-credit {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(24, 69, 59, 0.7);
            font-size: 14px;
            font-style: italic;
            text-align: center;
            padding: 5px 10px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 5px;
        }
        /* Countdown Clock Styles */
        #countdown {
            font-size: 24px;
            color: red;
            margin-bottom: 15px;
            font-weight: bold;
        }
        /* Game Schedule Styles */
        #game-schedule {
            margin-top: 20px;
            text-align: left;
            color: #2A6A5E;
        }
        #game-schedule h2 {
            font-size: 20px;
            margin-bottom: 10px;
            text-align: center;
            cursor: pointer;
            background-color: rgba(42, 106, 94, 0.1);
            padding: 5px;
            border-radius: 5px;
        }
        #game-schedule .day-games {
            display: none;
            margin-bottom: 15px;
        }
        #game-schedule .day-games.active {
            display: block;
        }
        #game-schedule div {
            margin: 5px 0;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="form-container">
        <img src="https://upload.wikimedia.org/wikipedia/commons/2/28/March_Madness_logo.svg" class="header-img" alt="NCAA Header">
        <h1>NCAA 2025 Survivor Bracket Form</h1>
        
        <form id="survivorForm" action="https://docs.google.com/forms/d/e/1FAIpQLSe_AvA48EOZ-1YIYkiyWhAmQATqwakSTMvfg-ohrykK7bhjjg/formResponse" method="POST" target="hiddenFrame">
            <!-- Countdown Clock -->
            <div id="countdown"></div>
            
            <label for="entry.477724720">What is your name: </label>
            <select name="entry.477724720" id="entry.477724720">
                <option value="" disabled selected>Select your name</option>
                <option value="Patrick Gifford">Patrick Gifford</option>
                <option value="Garret Gotaas">Garret Gotaas</option>
                <option value="Mike Schwartz">Mike Schwartz</option>
                <option value="Derrick Defever">Derrick Defever</option>
                <option value="Matt Syzmanski">Matt Syzmanski</option>
                <option value="Connor Giroux">Connor Giroux</option>
                <option value="Nick Dahl">Nick Dahl</option>
                <option value="Chris Canada">Chris Canada</option>
                <option value="Brian Burger">Brian Burger</option>
                <option value="Rich Deward">Rich Deward</option>
                <option value="Peter Murray">Peter Murray</option>
                <option value="Spenser Pawlik">Spenser Pawlik</option>
                <option value="Nick Mowid">Nick Mowid</option>
                <option value="James Conway">James Conway</option>
                <option value="Tom Strobel">Tom Strobel</option>
                <option value="Zak Burns">Zak Burns</option>
                <option value="Alex McAdoo">Alex McAdoo</option>
                <option value="Sean Falvey">Sean Falvey</option>
                <option value="Tyler Decoster">Tyler Decoster</option>
                <option value="Mike Gallagher">Mike Gallagher</option>
            </select><br>
            
            <label for="entry.569924040">Day 1 Selection (Thursday): </label>
            <input type="text" name="entry.569924040" id="entry.569924040"><br>
            
            <label for="entry.702432809">Day 2 Selection (Friday): </label>
            <input type="text" name="entry.702432809" id="entry.702432809"><br>
            
            <label for="entry.759815260">Day 3 Selection (Saturday): </label>
            <input type="text" name="entry.759815260" id="entry.759815260"><br>
            
            <label for="entry.577425884">Day 4 Selection (Sunday): </label>
            <input type="text" name="entry.577425884" id="entry.577425884"><br>

            <label for="entry.20028034">Day 5 Selection (Thursday): </label>
            <input type="text" name="entry.20028034" id="entry.20028034"><br>
            
            <label for="entry.979732111">Day 6 Selection (Friday): </label>
            <input type="text" name="entry.979732111" id="entry.979732111"><br>
            
            <label for="entry.2142180165">Day 7 Selection (Saturday): </label>
            <input type="text" name="entry.2142180165" id="entry.2142180165"><br>
            
            <label for="entry.269056470">Day 8 Selection (Sunday): </label>
            <input type="text" name="entry.269056470" id="entry.269056470"><br>
            
            <button type="submit">Submit Picks / View Results</button>
        </form>

        <!-- Game Schedule Section -->
        <div id="game-schedule">
            <h2 onclick="toggleGames('march-19')">March 19, 2025 (First Four)</h2>
            <div id="march-19" class="day-games">
                <!-- Games will be populated here -->
            </div>

            <h2 onclick="toggleGames('march-20')">March 20, 2025 (First Round - Day 1)</h2>
            <div id="march-20" class="day-games">
                <!-- Games will be populated here -->
            </div>

            <h2 onclick="toggleGames('march-21')">March 21, 2025 (First Round - Day 2)</h2>
            <div id="march-21" class="day-games">
                <!-- Games will be populated here -->
            </div>

            <h2 onclick="toggleGames('march-22')">March 22, 2025 (Second Round - Day 3)</h2>
            <div id="march-22" class="day-games">
                <!-- Games will be populated here -->
            </div>

            <h2 onclick="toggleGames('march-23')">March 23, 2025 (Second Round - Day 4)</h2>
            <div id="march-23" class="day-games">
                <!-- Games will be populated here -->
            </div>

            <h2 onclick="toggleGames('march-24')">March 24, 2025 (Rest Day)</h2>
            <div id="march-24" class="day-games">
                <!-- Games will be populated here -->
            </div>

            <h2 onclick="toggleGames('march-25')">March 25, 2025 (Rest Day)</h2>
            <div id="march-25" class="day-games">
                <!-- Games will be populated here -->
            </div>
        </div>

        <!-- Hidden iframe to handle form submission -->
        <iframe name="hiddenFrame" style="display:none;"></iframe>
    </div>
    
    <!-- Author credit at the bottom -->
    <div class="author-credit">Created by Mike Schwartz</div>
    
    <script>
        // Form submission redirect
        document.getElementById('survivorForm').addEventListener('submit', function(event) {
            setTimeout(() => {
                window.location.href = 'https://docs.google.com/spreadsheets/d/1pGraOWrTnMzlJVy4HyhalR0uaSSa5-EywcQ67wReSsE/edit?gid=2020266128#gid=2020266128';
            }, 1000);
        });

        // Countdown Clock
        function updateCountdown() {
            var targetDate = new Date("March 20, 2025 12:00:00"); // Noon on March 20, 2025
            var now = new Date();
            var timeLeft = targetDate - now;

            if (timeLeft <= 0) {
                document.getElementById("countdown").innerHTML = "Tournament Has Begun!";
                return;
            }

            var days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            var hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            document.getElementById("countdown").innerHTML = 
                days + "d " + hours + "h " + minutes + "m " + seconds + "s ";
        }

        // Update countdown every second
        setInterval(updateCountdown, 1000);
        updateCountdown(); // Initial call to display immediately

        // Fetch NCAA Games from The Sports DB
        const apiKey = '3'; // Free test key
        const leagueId = '4607'; // NCAA Division I Men's Basketball
        const season = '2024-2025'; // Season format
        const apiUrl = `https://www.thesportsdb.com/api/v1/json/${apiKey}/eventsseason.php?id=${leagueId}&s=${season}`;

        const weeklyGames = {
            "march-19": [],
            "march-20": [],
            "march-21": [],
            "march-22": [],
            "march-23": [],
            "march-24": [],
            "march-25": []
        };

        async function fetchGames() {
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                console.log('API Response:', data); // Log the full response for debugging
                const games = data.events || [];

                // Filter games for the week of March 19–25, 2025
                games.forEach(game => {
                    const gameDate = game.dateEvent;
                    if (gameDate === "2025-03-19") {
                        weeklyGames["march-19"].push(game);
                    } else if (gameDate === "2025-03-20") {
                        weeklyGames["march-20"].push(game);
                    } else if (gameDate === "2025-03-21") {
                        weeklyGames["march-21"].push(game);
                    } else if (gameDate === "2025-03-22") {
                        weeklyGames["march-22"].push(game);
                    } else if (gameDate === "2025-03-23") {
                        weeklyGames["march-23"].push(game);
                    } else if (gameDate === "2025-03-24") {
                        weeklyGames["march-24"].push(game);
                    } else if (gameDate === "2025-03-25") {
                        weeklyGames["march-25"].push(game);
                    }
                });

                // Display games for each day
                Object.keys(weeklyGames).forEach(day => {
                    const gameList = document.getElementById(day);
                    const games = weeklyGames[day];

                    if (games.length === 0) {
                        gameList.innerHTML = '<p>No games scheduled or data unavailable.</p>';
                    } else {
                        games.forEach(game => {
                            const gameDiv = document.createElement('div');
                            const time = new Date(`${game.dateEvent}T${game.strTime}Z`).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                            gameDiv.innerHTML = `${game.strAwayTeam} vs ${game.strHomeTeam} at ${time}`;
                            gameList.appendChild(gameDiv);
                        });
                    }
                });
            } catch (error) {
                console.error('Error fetching games:', error);
                Object
